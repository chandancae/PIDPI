<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üõ°Ô∏è PIDPI Awareness Program</title>
    <!-- Accessible & Scalable Webpage -->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #222;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header.nav-header {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.10);
        }
        header.nav-header h1 {
            text-align: center;
            color: #243044;
            font-size: 2.2rem;
        }
        header.nav-header p {
            text-align: center;
            color: #4870ad;
            margin-bottom: 15px;
        }
        .progress-container {
            background: #e0e7ef;
            border-radius: 10px;
            height: 12px;
            margin: 15px 0 25px 0;
        }
        .progress-bar {
            background: linear-gradient(90deg, #3498db, #2ecc71);
            height: 100%;
            width: 0%;
            transition: width 0.5s;
            border-radius: 10px;
        }
        nav.nav-menu {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 10px;
        }
        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: #34495e;
            color: white;
        }
        .nav-btn:focus-visible { outline: 2px solid #2ecc71; }
        .nav-btn.active {
            background: linear-gradient(45deg, #3498db, #2ecc71);
        }
        .nav-btn:disabled {
            opacity: 0.5; cursor: not-allowed;
        }
        main .content-section {
            display: none;
            background: #fffefa;
            border-radius: 15px;
            padding: 32px 28px 32px 28px;
            margin-bottom: 22px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.08);
            min-height: 500px;
        }
        .content-section[aria-hidden="false"] { display: block; animation: fadeInUp 0.5s; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .content-section h2 { color: #2c3e50; margin-bottom:16px; font-size: 1.7rem; }
        .content-section p, .content-section ul, .content-section li {
            line-height: 1.6; color: #474954; font-size: 1.08rem;
        }
        .accessible-btn {
            background: #fff;
            color: #243044;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 5px 15px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-left: 8px;
        }
        /* Quiz Section */
        .quiz-question {
            background: #f4f8fb;
            border-radius: 10px;
            padding: 17px;
            margin-bottom: 22px;
            border-left: 4px solid #3498db;
        }
        .quiz-options { list-style:none; margin:12px 0 0 0; }
        .quiz-options li { margin-bottom:7px; }
        .quiz-options label { cursor:pointer; }
        .quiz-options input[type="radio"]:focus-visible + span {
            outline: 2px solid #2ecc71; border-radius: 2px;
        }
        /* Feedback styling */
        .quiz-feedback {
            margin-top:5px; color: #27ae60; font-weight:600; font-size:1rem;
        }
        /* Certificate Section */
        .certificate {
            background: linear-gradient(45deg, #fff, #f8f9fa);
            border: 3px solid #3498db;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.10);
        }
        .certificate h2, .certificate h3 { margin-bottom:10px; }
        .certificate-content {
            margin: 26px 0; font-size:1.06rem;
        }
        .certificate-footer { margin-top:24px; color: #e74c3c; font-weight:bold; }
        /* Controls */
        .nav-controls {
            display: flex; justify-content:space-between; align-items:center; margin-top:16px;
        }
        .control-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            margin-right: 7px;
            margin-bottom: 6px;
        }
        .btn-primary {
            background: linear-gradient(45deg, #3498db, #2ecc71); color: white;
        }
        .btn-secondary {
            background: #a0b0c2; color: white;
        }
        .control-btn:focus-visible { outline: 2px solid #2ecc71; }
        .control-btn:disabled { opacity: 0.4; cursor: not-allowed;}
        .success-message {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 22px;
            text-align: center;
            font-weight: 600;
        }
        .note { color:#e67e22; font-size: 0.98rem; }
        .hidden { display: none;}
        /* Accessibility helper for screen readers */
        .sr-only { position: absolute; left: -9999px; width: 1px; height: 1px; overflow: hidden; }
        /* Responsive */
        @media (max-width: 900px) {
            .container {padding: 7px;}
            .certificate {padding: 18px;}
        }
        @media (max-width: 650px) {
            .nav-menu,.nav-controls { flex-direction: column; align-items:center; gap:8px;}
            .nav-btn,.control-btn { width:90%; margin-bottom:6px;}
        }
    </style>
</head>
<body>
<div class="container" role="main">
    <!-- Header -->
    <header class="nav-header" aria-label="Site header">
        <h1>üõ°Ô∏è PIDPI Awareness Program</h1>
        <p>‡§∏‡§§‡§∞‡•ç‡§ï‡§§‡§æ ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ | Public Interest Disclosure and Protection of Informers</p>
        <!-- Progress Bar -->
        <div class="progress-container" aria-label="Progress">
            <div class="progress-bar" id="progressBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="5"></div>
        </div>
        <!-- Accessible Navigation Menu -->
        <nav class="nav-menu" aria-label="Main steps navigation">
            <button class="nav-btn active" id="introductionBtn" aria-current="step" aria-controls="introduction" onclick="showSection('introduction', 0)">Introduction</button>
            <button class="nav-btn" id="overviewBtn" aria-controls="overview" onclick="showSection('overview',1)" disabled>Overview</button>
            <button class="nav-btn" id="guidelinesBtn" aria-controls="guidelines" onclick="showSection('guidelines',2)" disabled>Guidelines</button>
            <button class="nav-btn" id="quizBtn" aria-controls="quiz" onclick="showSection('quiz',3)" disabled>Assessment</button>
            <button class="nav-btn" id="certificateBtn" aria-controls="certificate" onclick="showSection('certificate',4)" disabled>Certificate</button>
        </nav>
    </header>
    <!-- Content Sections (ARIA live for screen reader feedback on navigation change) -->
    <main>
        <!-- Introduction -->
        <section class="content-section" aria-hidden="false" id="introduction" tabindex="-1">
            <h2>Welcome | ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à</h2>
            <p class="note">Connecting Indian values: <b>‡§ß‡§∞‡•ç‡§Æ (Ethics)</b>, <b>‡§ï‡§∞‡•ç‡§Æ (Duty)</b>, <b>‡§Ö‡§π‡§ø‡§Ç‡§∏‡§æ (Non-violence)</b>, <b>‡§∏‡•á‡§µ‡§æ (Service)</b>‚Äîwith responsible whistleblowing for <strong>integrity</strong> and <strong>inclusive development</strong>.</p>
            <p>
                <strong>PIDPI Act</strong>: This Indian law encourages and shields people who expose corruption or wrongdoing in the public interest.<br>
                <span lang="hi">‡§Ø‡§π ‡§ï‡§æ‡§®‡•Ç‡§® ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§≠‡•ç‡§∞‡§∑‡•ç‡§ü‡§æ‡§ö‡§æ‡§∞ ‡§ï‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§</span>
            </p>
            <ul>
                <li><b>Why vigilance?</b> Build a transparent and ethical workplace rooted in community values.</li>
                <li><b>What you‚Äôll learn:</b> Whistleblower safeguards, reporting steps, practical scenarios, and rights under PIDPI.</li>
            </ul>
            <p><strong>Estimated Duration:</strong> 15-20 min | <strong>Assessment:</strong> 3 quick questions | <strong>Certificate:</strong> After pass</p>
            <!-- Registration Form -->
            <form id="registrationForm" autocomplete="off" aria-label="Participant Registration" onsubmit="event.preventDefault(); validateAndProceed();">
                <fieldset aria-describedby="formNote" style="background: #fafbfc; padding: 20px; border-radius: 15px; border:2px solid #3498db; margin:22px 0 16px 0;">
                    <legend style="font-weight:600;color:#2c3e50">üìù Participant Registration (‡§ó‡•ã‡§™‡§®‡•Ä‡§Ø, locally stored only)</legend>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); gap: 14px;">
                        <div>
                            <label for="fullName">Full Name / ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ <span aria-label="Required">*</span></label>
                            <input type="text" id="fullName" required aria-required="true" maxlength="60" style="width:100%;padding:9px;border-radius:7px;border:1.5px solid #bbb;">
                        </div>
                        <div>
                            <label for="department">Department/Organization <span aria-label="Required">*</span></label>
                            <input type="text" id="department" required aria-required="true" maxlength="60" style="width:100%;padding:9px;border-radius:7px;border:1.5px solid #bbb;">
                        </div>
                        <div>
                            <label for="employeeId">Employee ID</label>
                            <input type="text" id="employeeId" maxlength="30" style="width:100%;padding:9px;border-radius:7px;border:1.5px solid #bbb;">
                        </div>
                        <div>
                            <label for="designation">Designation / ‡§™‡§¶‡§®‡§æ‡§Æ</label>
                            <input type="text" id="designation" maxlength="30" style="width:100%;padding:9px;border-radius:7px;border:1.5px solid #bbb;">
                        </div>
                        <div>
                            <label for="email">Email (never shared, for reference/records)</label>
                            <input type="email" id="email" maxlength="80" style="width:100%;padding:9px;border-radius:7px;border:1.5px solid #bbb;">
                        </div>
                        <div>
                            <label for="phone">Phone (for contact, optional)</label>
                            <input type="tel" id="phone" maxlength="20" inputmode="numeric" pattern="[0-9\-+ ]*" style="width:100%;padding:9px;border-radius:7px;border:1.5px solid #bbb;">
                        </div>
                    </div>
                    <p id="formNote" style="font-size:0.97rem;color:#888;text-align:center;margin-top:8px;">Fields marked * are required. Your details are <b>not stored or shared</b>‚Äîfor certification only.</p>
                </fieldset>
                <div class="nav-controls">
                    <button class="control-btn btn-secondary" disabled aria-disabled="true">Previous</button>
                    <button class="control-btn btn-primary" type="submit" id="beginBtn">Begin Program</button>
                </div>
            </form>
        </section>
        <!-- Overview -->
        <section class="content-section" aria-hidden="true" id="overview" tabindex="-1">
            <h2>PIDPI Act Overview | ‡§ï‡§æ‡§®‡•Ç‡§® ‡§ï‡§æ ‡§™‡§∞‡§ø‡§ö‡§Ø</h2>
            <ul>
                <li><b>Whistleblower Protection:</b> Fearless reporting‚Äîprotection from punishment or harassment.</li>
                <li><b>Proper Channels:</b> Clear, safe routes to report misconduct or corruption anonymously.</li>
                <li><b>Indian Example:</b> Think of a village panchayat member reporting illegal land grab. PIDPI ensures their identity is handled with utmost secrecy.</li>
                <li><b>Key Features:</b> Identity confidentiality, fast investigation, right to appeal, penalty for malicious complaints.</li>
            </ul>
            <blockquote lang="hi" style="font-size:1.02rem; color:#364354; border-left:3px solid #267be2; padding-left:11px;">
                "‡§ú‡§ø‡§∏‡§ï‡§æ ‡§Æ‡§® ‡§∏‡•ç‡§•‡§ø‡§∞ ‡§π‡•à, ‡§µ‡§π‡•Ä ‡§®‡•ç‡§Ø‡§æ‡§Ø ‡§ï‡•ã ‡§™‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§" <br>
                ‚Äì ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§¶‡§∞‡•ç‡§∂‡§® (One whose mind is steadfast, alone attains justice.)
            </blockquote>
            <p><strong>Scenarios and Caselets:</strong></p>
            <ul>
                <li>Public sector employee sees fraudulent payment‚Äîcan safely file a confidential PIDPI complaint, remain protected.</li>
                <li>NGO volunteer observing misuse of government funds‚ÄîPIDPI route offers anonymity and reassures against retaliation.</li>
            </ul>
            <div class="nav-controls">
                <button class="control-btn btn-secondary" onclick="previousSection()">Previous</button>
                <button class="control-btn btn-primary" onclick="nextSection()">Continue</button>
            </div>
        </section>
        <!-- Guidelines and Procedures -->
        <section class="content-section" aria-hidden="true" id="guidelines" tabindex="-1">
            <h2>Reporting Guidelines | ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂</h2>
            <ul>
                <li><b>Step 1:</b> Identify wrongdoing (corruption, misconduct, rights violation).</li>
                <li><b>Step 2:</b> Collect evidence‚Äîdocument what, when, who. (‡§Ö‡§ó‡§∞ ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•ã ‡§§‡•ã ‡§∏‡§Æ‡§∞‡•ç‡§•‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§∏‡§Ç‡§≤‡§ó‡•ç‡§® ‡§ï‡§∞‡•á‡§Ç‡•§)</li>
                <li><b>Step 3:</b> Use official PIDPI channel‚Äîavoid discussing openly to protect process integrity.</li>
                <li><b>Step 4:</b> Stay involved but discreet‚Äîcooperate with investigating authorities.</li>
            </ul>
            <table style="width:100%;margin-top:13px;border-collapse:collapse;">
                <caption style="font-weight:600;margin-bottom:4px;">Do‚Äôs & Don‚Äôts (included as screen-reader text as well)</caption>
                <thead>
                    <tr style="background:#e6f0fa;">
                        <th scope="col">Do‚Äôs</th><th scope="col">Don‚Äôts</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Report in good faith <span class="sr-only">(do)</span></td>
                        <td>Never file frivolous or fake complaints <span class="sr-only">(don't)</span></td>
                    </tr>
                    <tr>
                        <td>Maintain full confidentiality</td>
                        <td>Don‚Äôt discuss with media or outsiders during investigation</td>
                    </tr>
                    <tr>
                        <td>Help authorities by sharing facts</td>
                        <td>Don‚Äôt try to pressurize or influence the process</td>
                    </tr>
                </tbody>
            </table>
            <div class="nav-controls">
                <button class="control-btn btn-secondary" onclick="previousSection()">Previous</button>
                <button class="control-btn btn-primary" onclick="nextSection()">Assessment</button>
            </div>
        </section>
        <!-- Quiz Section -->
        <section class="content-section" aria-hidden="true" id="quiz" tabindex="-1" aria-label="Knowledge assessment">
            <h2>Knowledge Assessment | ‡§ú‡•ç‡§û‡§æ‡§® ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®</h2>
            <form id="quizForm" aria-describedby="quizDesc">
                <p id="quizDesc" class="note">For each question, select the <strong>best answer</strong>. Instant feedback below each question. You must get 2/3 correct to earn your certificate!</p>
                <div class="quiz-question">
                    <p><strong>1. Main purpose of PIDPI Act?</strong></p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q1-label">
                        <li>
                            <label><input type="radio" name="q1" value="a" aria-describedby="q1-label"><span> To punish employees</span></label>
                        </li>
                        <li>
                            <label><input type="radio" name="q1" value="b" aria-describedby="q1-label"><span> To protect whistleblowers and encourage reporting of misconduct</span></label>
                        </li>
                        <li>
                            <label><input type="radio" name="q1" value="c"><span> To increase bureaucracy</span></label>
                        </li>
                        <li>
                            <label><input type="radio" name="q1" value="d"><span> To reduce transparency</span></label>
                        </li>
                    </ul>
                    <span id="feedback-q1" class="quiz-feedback" aria-live="polite"></span>
                </div>
                <div class="quiz-question">
                    <p><strong>2. Which is protected under PIDPI?</strong></p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q2-label">
                        <li>
                            <label><input type="radio" name="q2" value="a"><span> Identity of the complainant</span></label>
                        </li>
                        <li>
                            <label><input type="radio" name="q2" value="b"><span> Evidence provided</span></label>
                        </li>
                        <li>
                            <label><input type="radio" name="q2" value="c"><span> Investigation process</span></label>
                        </li>
                        <li>
                            <label><input type="radio" name="q2" value="d"><span> All of the above</span></label>
                        </li>
                    </ul>
                    <span id="feedback-q2" class="quiz-feedback" aria-live="polite"></span>
                </div>
                <div class="quiz-question">
                    <p><strong>3. What should you do before filing a PIDPI complaint?</strong></p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q3-label">
                        <li>
                            <label><input type="radio" name="q3" value="a"><span> Discuss with colleagues</span></label>
                        </li>
                        <li>
                            <label><input type="radio" name="q3" value="b"><span> Gather relevant evidence and documentation</span></label>
                        </li>
                        <li>
                            <label><input type="radio" name="q3" value="c"><span> Contact media</span></label>
                        </li>
                        <li>
                            <label><input type="radio" name="q3" value="d"><span> Wait for someone else to report</span></label>
                        </li>
                    </ul>
                    <span id="feedback-q3" class="quiz-feedback" aria-live="polite"></span>
                </div>
                <div class="nav-controls">
                    <button class="control-btn btn-secondary" type="button" onclick="previousSection()">Previous</button>
                    <button class="control-btn btn-primary" type="button" onclick="submitQuiz()">Submit Assessment</button>
                </div>
            </form>
            <div id="quiz-summary" class="note hidden" aria-live="polite"></div>
        </section>
        <!-- Certificate Section -->
        <section class="content-section" aria-hidden="true" id="certificate" tabindex="-1">
            <div id="successMessage" class="success-message hidden">
                <p>üéâ <b>Congratulations!</b> You‚Äôve completed the PIDPI program.<br>
                <span lang="hi">‡§¨‡§ß‡§æ‡§à! ‡§Ü‡§™‡§®‡•á ‡§∏‡§§‡§∞‡•ç‡§ï‡§§‡§æ ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à‡•§</span></p>
            </div>
            <div class="certificate" aria-label="Digital PIDPI Certificate">
                <h2>‡§∏‡§§‡§∞‡•ç‡§ï‡§§‡§æ ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞</h2>
                <h2>VIGILANCE AWARENESS CERTIFICATE</h2>
                <h3>PIDPI - Public Interest Disclosure and Protection of Informers</h3>
                <div class="certificate-content">
                    <p><strong>This is to certify that / ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à ‡§ï‡§ø</strong></p>
                    <div style="margin: 20px 0 10px 0; padding: 15px; background: #f0f8ff; border-radius:8px; border:2px dashed #3498db;">
                      <p><strong>Name / ‡§®‡§æ‡§Æ:</strong> <span id="certName" style="font-size:1.2rem;color:#2c3e50;"></span></p>
                      <p><strong>Employee ID / ‡§ï‡§∞‡•ç‡§Æ‡§ö‡§æ‡§∞‡•Ä ‡§Ü‡§à‡§°‡•Ä:</strong> <span id="certEmpId" style="color:#2c3e50;"></span></p>
                      <p><strong>Department / ‡§µ‡§ø‡§≠‡§æ‡§ó:</strong> <span id="certDept" style="color:#2c3e50;"></span></p>
                      <p><strong>Designation / ‡§™‡§¶‡§®‡§æ‡§Æ:</strong> <span id="certDesig" style="color:#2c3e50;"></span></p>
                    </div>
                    <p><b>has successfully completed PIDPI Awareness Program</b><br>
                    <span lang="hi">‡§®‡•á ‡§∏‡§§‡§∞‡•ç‡§ï‡§§‡§æ ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à</span></p>
                    <p><strong>Program Duration / ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§Ö‡§µ‡§ß‡§ø:</strong> 15-20 min</p>
                    <p><strong>Assessment Score / ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§∏‡•ç‡§ï‡•ã‡§∞:</strong> <span id="certScore"></span>/3</p>
                    <p><strong>Completion Date / ‡§™‡•Ç‡§∞‡•ç‡§£‡§§‡§æ ‡§§‡§ø‡§•‡§ø:</strong> <span id="completionDate"></span></p>
                    <p><strong>Certificate ID / ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§Ü‡§à‡§°‡•Ä:</strong> <span id="certificateId"></span></p>
                </div>
                <div class="certificate-footer">
                    <p><b>‡§∏‡§§‡•ç‡§Ø‡§Æ‡•á‡§µ ‡§ú‡§Ø‡§§‡•á ‚Äì Truth Alone Triumphs</b></p>
                    <p style="font-size:0.95rem;margin-top:7px;">This certificate is generated and stored <strong>only client-side</strong> for your privacy</p>
                </div>
            </div>
            <div class="nav-controls">
                <button class="control-btn btn-secondary" onclick="previousSection()">Previous</button>
                <div style="display:flex;gap:9px;">
                    <button class="control-btn btn-primary" onclick="downloadCertificatePDF()">üìÑ Download PDF Certificate</button>
                    <button class="control-btn" style="background:#27ae60;" onclick="saveParticipantData()">üíæ Save Record</button>
                </div>
            </div>
        </section>
    </main>
</div>
<!-- PDF Generation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous"></script>
<script>
//--- Section state and navigation logic
let currentSection = 0;
const sections = ['introduction', 'overview', 'guidelines', 'quiz', 'certificate'];
const correctAnswers = ['b', 'd', 'b'];
let participantData = {};
// Accessibility: focus on major section change
function focusVisibleSection(idx) {
    document.getElementById(sections[idx]).focus();
}
// Update progress bar and ARIA state
function updateProgress() {
    const progress = ((currentSection + 1) / sections.length) * 100;
    const pb = document.getElementById('progressBar');
    pb.style.width = progress + '%';
    pb.setAttribute('aria-valuenow', (currentSection + 1));
}
// Show only one section
function showSection(sectionId, index) {
    for (let i = 0; i < sections.length; i++) {
        const sec = document.getElementById(sections[i]);
        sec.setAttribute('aria-hidden', i !== index);
        if(i !== index) sec.classList.remove('active');
        else sec.classList.add('active');
    }
    // update nav button active states
    document.querySelectorAll('.nav-btn').forEach((btn, i) => {
        btn.classList.toggle('active', i === index);
        btn.setAttribute('aria-current', i === index ? 'step' : 'false');
    });
    currentSection = index;
    updateProgress();
    focusVisibleSection(index);
}
function showSectionByIndex(index) { showSection(sections[index], index); }
function nextSection() {
    if(currentSection < sections.length - 1) {
        // Enable next nav step
        document.getElementById(sections[currentSection + 1] + 'Btn').disabled = false;
        showSectionByIndex(++currentSection);
    }
}
function previousSection() {
    if(currentSection > 0) showSectionByIndex(--currentSection);
}
//--- Registration validation and start
function validateAndProceed() {
    const form = document.getElementById('registrationForm');
    if (!form.checkValidity()) {
        form.reportValidity();
        return;
    }
    participantData = {
        fullName: document.getElementById('fullName').value.trim(),
        employeeId: document.getElementById('employeeId').value.trim() || 'N/A',
        department: document.getElementById('department').value.trim(),
        designation: document.getElementById('designation').value.trim() || 'N/A',
        email: document.getElementById('email').value.trim() || 'N/A',
        phone: document.getElementById('phone').value.trim() || 'N/A',
        startTime: new Date().toISOString(),
        certificateId: generateCertificateId()
    };
    nextSection();
}
//--- Quiz interactivity: feedback per question, summary at end
document.querySelectorAll('.quiz-options').forEach(group => {
    group.addEventListener('change', event => {
        const idx = parseInt(event.target.name.replace('q',''))-1;
        const feedbackSpan = document.getElementById('feedback-q'+(idx+1));
        // Question/answer dependent feedback
        const ans = event.target.value;
        let correct = correctAnswers[idx];
        let msg;
        if(ans === correct) {
            msg = "‚úÖ Correct!";
            feedbackSpan.style.color = "#22ad51";
        } else {
            msg = "‚ùå Incorrect. Try again or review the content.";
            feedbackSpan.style.color = "#e74c3c";
        }
        feedbackSpan.textContent = msg;
    });
});
function submitQuiz() {
    const answers = [];
    let correctCount = 0;
    let triedAll = true;
    // Check each question
    for (let i = 1; i <= correctAnswers.length; i++) {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        if (selected) {
            answers.push(selected.value);
            if (selected.value === correctAnswers[i-1]) correctCount++;
        } else {
            triedAll = false;
        }
    }
    if (!triedAll) {
        document.getElementById('quiz-summary').textContent = "‚ùó Please answer all questions!";
        document.getElementById('quiz-summary').classList.remove('hidden');
        return;
    }
    let summary = correctCount >= 2 ?
        `üéâ You passed! You correctly answered ${correctCount}/3. Certificate unlocked.` :
        `You got ${correctCount}/3. Please review the content and try again for certification.`;
    document.getElementById('quiz-summary').textContent = summary;
    document.getElementById('quiz-summary').classList.remove('hidden');
    // If passed, unlock certificate section
    if (correctCount >= 2) {
        participantData.completionTime = new Date().toISOString();
        participantData.score = correctCount;
        participantData.passed = true;
        document.getElementById('certificateBtn').disabled = false;
        // Prepare certificate display
        document.getElementById('successMessage').classList.remove('hidden');
        populateCertificateData();
        nextSection();
    }
}
//--- Certificate data filling
function populateCertificateData() {
    document.getElementById('certName').textContent = participantData.fullName;
    document.getElementById('certEmpId').textContent = participantData.employeeId;
    document.getElementById('certDept').textContent = participantData.department;
    document.getElementById('certDesig').textContent = participantData.designation;
    document.getElementById('certScore').textContent = participantData.score;
    document.getElementById('completionDate').textContent =
        new Date(participantData.completionTime).toLocaleDateString('en-GB');
    document.getElementById('certificateId').textContent = participantData.certificateId;
}
// Advanced: more entropy in cert ID
function generateCertificateId() {
    const d = new Date();
    const parts = [d.getFullYear(),('0'+(d.getMonth()+1)).slice(-2),('0'+d.getDate()).slice(-2)];
    const rand = Math.floor(Math.random()*100000).toString().padStart(5, '0');
    return `PIDPI-${parts.join('')}-${rand}`;
}
//--- PDF Certificate generation
function downloadCertificatePDF() {
    if (!participantData.passed) {
        alert('Please complete the assessment successfully first.');
        return;
    }
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF('landscape','mm','a4');
    doc.setFillColor(255,255,255); doc.rect(0,0,297,210,'F');
    doc.setDrawColor(52,152,219); doc.setLineWidth(3); doc.rect(10,10,277,190);
    doc.setLineWidth(1); doc.rect(15,15,267,180);
    doc.setFont("helvetica","bold"); doc.setFontSize(20); doc.setTextColor(44,62,80);
    doc.text('‡§∏‡§§‡§∞‡•ç‡§ï‡§§‡§æ ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞', 148.5, 35, {align:'center'});
    doc.setFontSize(18); doc.text('VIGILANCE AWARENESS CERTIFICATE', 148.5, 45, {align:'center'});
    doc.setFontSize(14); doc.setTextColor(52,152,219);
    doc.text('PIDPI - Public Interest Disclosure and Protection of Informers', 148.5, 55, {align:'center'});
    doc.setFont("helvetica","normal"); doc.setFontSize(12); doc.setTextColor(44,62,80);
    doc.text('This is to certify that / ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à ‡§ï‡§ø', 148.5, 70, {align:'center'});
    // Details box
    doc.setDrawColor(52,152,219); doc.setFillColor(240,248,255);
    doc.roundedRect(40, 80, 217, 45, 5, 5, 'FD');
    doc.setFont("helvetica","bold"); doc.setFontSize(11);
    doc.text(`Name / ‡§®‡§æ‡§Æ: ${participantData.fullName}`, 45, 90);
    doc.text(`Employee ID: ${participantData.employeeId}`, 45, 100);
    doc.text(`Department: ${participantData.department}`, 45, 110);
    doc.text(`Designation: ${participantData.designation}`, 45, 120);
    // Completion text
    doc.setFont("helvetica","normal"); doc.setFontSize(11);
    doc.text('has successfully completed PIDPI Awareness Program', 148.5, 140, {align:'center'});
    doc.text('‡§®‡•á ‡§∏‡§§‡§∞‡•ç‡§ï‡§§‡§æ ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à', 148.5, 150, {align:'center'});
    doc.setFontSize(10);
    doc.text(`Program Duration: 15-20 min`, 45, 165);
    doc.text(`Assessment Score: ${participantData.score}/3`, 200, 165);
    doc.text(`Completion Date: ${new Date(participantData.completionTime).toLocaleDateString('en-GB')}`, 45, 175);
    doc.text(`Certificate ID: ${participantData.certificateId}`, 200, 175);
    doc.setFont("helvetica","bold"); doc.setFontSize(12); doc.setTextColor(231,76,60);
    doc.text('‡§∏‡§§‡•ç‡§Ø‡§Æ‡•á‡§µ ‡§ú‡§Ø‡§§‡•á ‚Äì Truth Alone Triumphs', 148.5, 190, {align:'center'});
    doc.setFont("helvetica","normal"); doc.setFontSize(8); doc.setTextColor(127,140,141);
    doc.text('This certificate is generated and stored only client-side for your privacy', 148.5, 195, {align:'center'});
    // Save PDF
    const fileName = `PIDPI_Certificate_${participantData.fullName.replace(/\s+/g,'_')}_${participantData.certificateId}.pdf`;
    doc.save(fileName);
}
//--- Export participant data
function saveParticipantData() {
    if(!participantData.passed) { alert('Please complete the assessment first.'); return;}
    const recordData = { ...participantData,
        completionDate: new Date(participantData.completionTime).toLocaleDateString('en-GB'),
        completionTime: new Date(participantData.completionTime).toLocaleTimeString('en-GB')
    };
    const dataStr = JSON.stringify(recordData, null, 2);
    const dataBlob = new Blob([dataStr], {type:'application/json'});
    const link = document.createElement('a');
    link.href = URL.createObjectURL(dataBlob);
    link.download = `PIDPI_Record_${participantData.fullName.replace(/\s+/g,'_')}_${participantData.certificateId}.json`;
    link.click();
    alert('Participant record saved on your device only.');
}
// Initialize progress/ARIA
updateProgress();
</script>
</body>
</html>
